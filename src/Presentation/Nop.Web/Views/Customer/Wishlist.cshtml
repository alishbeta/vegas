@model WishlistModel
@using Nop.Core
@using Nop.Core.Domain.Catalog
@using Nop.Core.Domain.Orders
@using Nop.Core.Domain.Tax
@inject CatalogSettings catalogSettings
@inject IWorkContext workContext
@{
	Layout = "_ColumnsOne";

	//title
	Html.AddTitleParts(T("PageTitle.Wishlist").Text);
	//page class
	Html.AppendPageCssClassParts("html-wishlist-page");
}
<nav class="breadcrumb-wrap" aria-label="breadcrumb">
	<ol class="breadcrumb">
		<li class="breadcrumb-item"><a href="/">Bed4you</a></li>
		<li class="breadcrumb-item"><a href="/customer/info">@T("account.cabinet")</a></li>
		<li class="breadcrumb-item active"><a href="#">@T("wishlist")</a></li>
	</ol>
</nav>

<div class="row cabinet">
	<div class="offset-xl-1 col-xl-8">
		<div class="title-wrap clearfix">
			<h1 class="title float-left">Личный кабинет</h1>
			<button class="btn btn-blue float-right btn-sm" onclick="window.location.replace('/logout')">Выход</button>
		</div>
		<nav class="blue-menu clearfix">
			<ul>
				<li><a href="/customer/info">Контактная информация</a></li>
				<li><a class="active" href="/customer/wishlist">Избранное <span id="wishlistCount"></span></a></li>
				<li><a href="/order/history">История заказов</a></li>
				<li><a href="/rewardpoints/history">Мои бонусы</a></li>
			</ul>
		</nav>
		<div class="cabinet-info rounded">
			<div class="row favorite-wrap">
				<div class="title-wrap">
					<h6><b>Избранное</b></h6>
					<div class="close-wrap">
						<i class="close-i"></i>
						<button class="btn btn-link">Очистить список</button>
					</div>
				</div>
				<div class="items">
					@foreach (var item in Model.Items)
					{
						//prepare "Add to cart" AJAX link
						var addtocartlink = "";
						var shoppingCartTypeId = (int)ShoppingCartType.ShoppingCart;
						var quantity = 1;
						addtocartlink = Url.RouteUrl("AddProductToCart-Catalog", new { productId = item.ProductId, shoppingCartTypeId = shoppingCartTypeId, quantity = quantity });
						var addtowishlistlink = Url.RouteUrl("AddProductToCart-Catalog", new { productId = item.ProductId, shoppingCartTypeId = (int)ShoppingCartType.Wishlist, quantity = quantity });
						var addtocomparelink = Url.RouteUrl("AddProductToCompare", new { productId = item.ProductId });
						<div class="item-wrap">
							<div class="product-img-wrap">
								<div>
									<i class="compare_icon" data-ids="@item.ProductId" onclick="AjaxCart.addproducttocomparelist('@addtocomparelink');return false;"></i>
									<i class="close-i" onclick="RemoveFromCart(@item.ProductId, 2, true)"></i>
								</div>
								<img class="product" alt="@item.Picture.AlternateText" src="@item.Picture.ImageUrl" title="@item.Picture.Title" />
								@if (item.DiscountPercentage != decimal.Zero)
								{
									<div class="discount">-@item.DiscountPercentage.ToString("#.##")%</div>
								}
							</div>
							<div class="main-prop-wrap text-left">
								<div class="product-name text-light-c">@item.ProductName</div>
								<div class="product-prop">@item.ProductSeName</div>
								<div class="price-titile">Цена</div>
								<div class="price-wrap clearfix">
									@if (item.OldPrice != string.Empty)
									{
										<div class="price-old">@item.OldPrice</div>
									}
									<div class="price-new">@item.Price</div>
								</div>
							</div>
							<button class="btn btn-blue btn-block mt-4 mb-4" onclick="AjaxCart.addproducttocart_catalog('@addtocartlink');return false;">Купить</button>
						</div>
					}
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	$(document).ready(function () {
		$.ajax({
			url: "/Common/GetWishlistCount",
			type: "POST",
			dataType: 'text',
			traditional: true
		}).done(function (responce) {
			$("#wishlistCount").text("(" + responce + ")");
		});
	});
</script>